%%%%%
%%
%% This file sets up the Mem, MemFold, and MemEnvelope datatypes, and
%% creates possible macros for each.
%%
%% The Mem datatype isn't really used directly; it's there so the
%% other datatypes can inherit and share its code.
%%
%%%%%

\DECLARESUBTYPE{Mem}{Element}
\PRESETS{Mem}{
  %% \MYname is the trigger
  \F\MYtext	%%  text
  }


%%%%%
%% MemFold and MemEnvelope are both subtypes of Mem.  MemFold is for
%% fold-n-staple style mempackets, MemEnvelope is for stuff-n-seal
%% style mempackets.  If you want a mempacket to contain interesting
%% contents, like sheets, abilities, and other mempackets, use a
%% MemEnvelope.
\DECLARESUBTYPE{MemFold}{Mem}
\DECLARESUBTYPE{MemEnvelope}{Mem}


%%%%%
%% MemCover and MemPage are for the cover and pages of mempacket
%% booklets, which resemble research notebooks.  These are good
%% substitutes for large piles of MemFolds, and can be useful for
%% things like amnesiac characters.
%%
%% Like MemFolds, MemPages shouldn't directly own any other elements
%% as contents.  Use MemEnvelope instead.
%%
%% MemPages are usually assigned to a MemCover (via \MYmems), with the
%% MemCover representing the entire booklet and assigned to a
%% character.
%%
%% A MemCover is not a mempacket in and of itself; its name is not its
%% trigger and its text is not a memory.
\DECLARESUBTYPE{MemCover}{Mem}
\PRESETS{MemCover}{
  \sd\MYtext	{Each page is a memory/event packet with a separate
		trigger.}
  }

\DECLARESUBTYPE{MemPage}{Mem}


%%%%%
%% \memfold{<trigger>}{<text>}
%% \memenvelope{<trigger>}{<text>}
%% \memcover{<name>}{<pages>}
%% \mempage{<trigger>}{<text>}
%% \startmembook{<name>} <pages> \endmembook
%%
%% These are wrappers around \INSTANCE, useful as 1-shots.
%% \startmembook...\endmembook is a simple wrapper around \memcover
%% that may have better syntax for use within character sheets (inside
%% a \starttag{mems}...\endtag block).
\newinstance{MemFold}{\memfold[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{MemEnvelope}{\memenvelope[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{MemCover}{\memcover[2]}{
  \s\MYname{#1}\s\MYmems{#2}}
\newinstance{MemPage}{\mempage[2]}{
  \s\MYname{#1}\s\MYtext{#2}}

\long\def\startmembook#1#2\endmembook{\memcover{#1}{#2}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{MemFold}{\mTest}{
  \s\MYname	{Test Trigger}
  \s\MYtext	{This is a Test of a fold-n-staple memory packet}
  }

\NEW{MemFold}{\mGod}{
  \s\MYname	{You see Badge Number 500}
  \s\MYtext	{This man is Markrox, the founder of Virtuism and its Lord and Savior}
  }

\NEW{MemFold}{\mPicture}{
  \s\MYname	{You see Number 444}
  \s\MYtext	{This is a picture of your face!}
  }

\NEW{MemFold}{\mDead}{
  \s\MYname	{You die.}
  \s\MYtext	{Wait 5 minutes as a corpse. Go 'I'm Not Here." Leave a copy of your name badge on the ground to represent your corpse. Then walk to room 032, and go inside. Wait 2 minutes, lower your $\Omega$ -score by 1, and become present .You are now alive again. Use this mechanic again if you die again.}
  }

\NEW{MemFold}{\mHotAlien}{
  \s\MYname	{You see Badge Number 321}
  \s\MYtext	{Oooh, hm... they're pretty cute. Nice clothes too. They look wealthy...}
  }

 \NEW{MemFold}{\mGroomnessA}{
  \s\MYname	{You get in an argument with Badge Number 439}
  \s\MYtext	{You are the real \cGroom{}, you just know it! But how to prove yourself\ldots{}  Maybe if you could find some of your belongings, that would lend legitimacy to your claims}
  }
  
    \NEW{MemFold}{\mGroomnessB}{
  \s\MYname	{You get in an argument with Badge Number 438}
  \s\MYtext	{You are the real \cGroom{}, you just know it! But how to prove yourself\ldots{}  Maybe if you could find some of your belongings, that would lend legitimacy to your claims}
  }
  %% literally the only difference is badge number
  %% I like the idea of not telling the grooms what the items are or how many, and not just because it's less work. 
  %% current items: dogtags, photo


\NEW{MemEnvelope}{\mEnvTest}{
  \s\MYname	{Test Trigger}
  \s\MYtext	{This is a Test of a stuff-n-seal memory packet}
  }


\NEW{MemEnvelope}{\mDreamControllerPacket}{
  \s\MYname	{$\Delta$ Packet}
  \s\MYtext	{You know how to use the existing technology within the simulation to make the dream controller, a device that can get you out of the simulation.}
  \s\MYabils	{\aMakeDreamController{}}
  }

\NEW{MemEnvelope}{\mAmazing}{
  \s\MYname	{if you see something amazing}
  \s\MYtext	{Wow!  That was amazing!  Hey, you seem to be able to
		do amazing things, too.  See the enclosed greensheet
		and ability.}
  \s\MYgreens	{\gTest{}}
  }
  \NEW{MemEnvelope}{\mCorrupt}{
  \s\MYname	{O-Packet}
  \s\MYtext	{You are now Corrupt. You gain the following ability.}
  \s\MYabils	{\aCorrupt{}}
  }

\NEW{MemCover}{\mVirus}{
  \s\MYname	{$\Omega$ Packet}
  \s\MYmems	{\mPageOne{}\mPageTwo{}\mPageThree{}\mPageFour{}}
  }

\NEW{MemPage}{\mPageOne}{
  \s\MYname	{ If your $\Omega$-score drops to 6}
  \s\MYtext	{Oh dear, you feel a little odd. The world seems to be moving faster than you are, in leaps and twitches.

You can only walk heel-to-toe and cannot run for five minutes.

Every time your $\Omega$-score drops again, you must walk heel-to-toe for another five minutes. }
  }

\NEW{MemPage}{\mPageTwo}{
  \s\MYname	{ If your $\Omega$-score drops to 3 }
  \s\MYtext	{How frustrating! You can think clearly, but every word coming out of your mouth seems to be garbled. Is your tongue not working?

You can only communicate in gibberish for five minutes. Feel free to gesture. You also have to walk heel-to-toe for five minutes.

Every time your $\Omega$-score drops, you must talk in gibberish for another five minutes, as well as walking heel-to-toe for five minutes.}
  }

\NEW{MemPage}{\mPageThree}{
  \s\MYname	{If your $\Omega$ drops to 1}
  \s\MYtext	{In addition to talking gibberish and walking heel-to-toe, open your O-packet.}
}

\NEW{MemPage}{\mPageFour}{
  \s\MYname	{If your $\Omega$ drops to 0}
  \s\MYtext	{Oh no, this isn't supposed to happen. You hear a ringing, screeching drone, like a phone dial, and everything goes dark.

You are now in permanent coma, and are effectively dead.}
}
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
